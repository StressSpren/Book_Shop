{% extends "base.html" %}
{% block content %}



<table class="table table-striped">
    <tr>
    <th>Book</th>
    <th>Price</th>
    <th>
        <form method="POST">
            {% csrf_token %}
                <input type="hidden" name="delete_cart" value="true">
                <button type="submit">Clear Basket</button>
        </form>
    </th>
    </tr>
    
    {% for bk in cart %}
        {%if user.username == bk.user_id.username %}
            <tr>
                {% comment %} <td>{{bk}}</td> # calls def __str__(self) function {% endcomment %}
            
                <td>{{bk.book.title}}</td>
                <td>{{bk.book.price}}</td>
                <td>
                    <form method="POST">
                        {% csrf_token %}
                    <input type="hidden" name="delete_item" value="true">
                    <input type="hidden" name="cart_id" value="{{bk.id}}">
                    <button type="submit">DELETE</button>
                    </form>
                </td>
            </tr>
            
        {% endif %}    
    {% endfor %}
</table>
<p>Total Price: {{total_price}}</p>

{% endblock content %}

